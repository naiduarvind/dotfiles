#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# function to switch cluster in GCP.
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
function gcred () {
  [[ "$#" -lt 1 ]] && `_gcred_usage` && return
  local cmd="gcloud container clusters get-credentials $1 --zone=$2"

  echo "ðŸ‘¾  $cmd" && eval $cmd && echo "" && eval "kubectl config current-context"
}

#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# function to retrieve GCP regions.
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
gcr() {
	if [ -z "$1" ]; then
	    gcloud compute regions list
	else
	    gcloud compute regions describe "$@"
	fi
}

#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# function to retrieve GCP zones.
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
gcz() {
	if [ -z "$1" ]; then
    	gcloud compute zones list
	else
		gcloud compute zones describe "$@"
	fi
}

#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# function helpers.
#-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
_gcred_usage () {
  local ctx=$(kubectl config current-context)
  echo "ðŸ‘¾  ------- Switch gcloud cluster ----- ðŸ‘¾" >&2
  echo "Usage:" >&2
  echo "   gcred <name>" >&2
  echo "   E.g: gcred entur" >&2
  echo "        will switch to the entur cluster" >&2
  echo "ðŸ‘¾  ----------------------------------- ðŸ‘¾" >&2
  echo "ðŸ‘¾  Current context: $ctx" >&2
}